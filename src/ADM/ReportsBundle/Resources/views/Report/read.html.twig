{# OffCanvas Layout | http://webapplayers.com/inspinia_admin-v2.1/off_canvas_menu.html #}
{% extends "ADMCoreBundle::OffCanvasLayout.html.twig" %}

{% block title %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block extraheadcontent %}
    <style>
        .article h1 {
            font-size: 25px;
        }
        #reportName{
            font-size: 40px;
            font-weight: 700;
            color: #2F4050;
            padding-left: 10%;
            padding-right: 10%;
            padding-top: 15px;
            padding-bottom: 15px;

        }

        .static-map {
            width:100%;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .ibox-content{
            padding-left: 5%;
            padding-right:5%;
        }

    </style>

    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.css' rel='stylesheet' />
{% endblock %}

{% block bodyclass %}
    "skin-3 mini-navbar"
{% endblock %}
{# Options du bodyclass : "skin-1"  "skin-2" "skin-3" "mini-navbar" "fixed-sidebar" : dans ce cas ne pas oublier d'ajouter le script slimScroll qui se trouve dans js/inspinia.js file et décommenter le Fixed Sidebar comment and uncomment function et ajouter <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>"fixed-nav" : dans ce cas mettre navbar-fixed-top si body class = fixed-nav dans <nav>   En mettant mini-navbar ET fixed-sidebar ET fixed-nav, on ne voit plus du tout la barre de navigation de gauche et la barre du haut devient fixe (pour Rapports de stage peut-être), "canvas-menu"pour le OffCanvasLayout #}

{% block closeNavbar %}
{% endblock %}
{# Ajouter <a class="close-canvas-menu"><i class="fa fa-times"></i></a> si bodyclass=canvas-menu #}

{% block menus %}
   {{ parent() }}
{% endblock %}

{% block pagewrapperclass %}
   {{ parent() }}
{% endblock %}
{# Options du pagewrapperclass : "gray-bg" "gray-bg dashboard-1" mais ça a pas l'air de servir grand chose "gray-bg sidebar-content" ajoute une jolie barre sur la droite  (peut-être pour mettre le sommaire des rapports). Par contre pas toujours terrible pour les téléphones car elle est prioritaireIl faut créer un <div class="sidebard-panel">. Voir exemple #}

{% block navbarclass %}
   {{ parent() }}
{% endblock %}
{# "navbar navbar-static-top" ou "navbar-fixed-top" si body class = fixed-nav #}

{% block topnav %}
   {{ parent() }}
{% endblock %}

{# On met soit le block dashboardheader ou pageheading mais pas les deux, on peut aussi les enlever tous les deux. Je mets du contenu pour l'exemple #}
{% block dashboardheader %}
{% endblock %}


{% block breadcrumb %}
    <h2>{{ report.name }}</h2>
    <ol class="breadcrumb">
        <li>
            <a href="{{ path('adm_core_home') }}">Accueil</a>
        </li>
        <li>
            <a href="#">Rapports</a>
        </li>
        <li class="active">
            <strong>Diagnostic Agraire</strong>
        </li>
    </ol>
{% endblock %}

{% block wrappercontentclass %}
    "wrapper wrapper-content animated fadeInRight article"
{% endblock %}
{# Options du pagewrapperclass : "wrapper wrapper-content" "wrapper wrapper-content animated fadeInRight" voire "wrapper wrapper-content animated fadeInRight article" pour faire apparaître le contenu de façon un peu dynamique (voir animate.css pour toutes les options) #}

{% block pagecontent %}
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1">
            <div class="ibox">
                <div class="ibox-content">

                            <div class="pull-right">
                                <a class="btn btn-white btn-xs" href="{{ path('adm_report_update',{'slug': report.slug}) }}" role="button"><i class="fa fa-pencil"></i> Editer</a>
                            </div>

                            <div class="text-center article-title">
                                <div id="reportName">
                                    {{ report.name | upper }}
                                </div>
                                {% for author in report.authors %}
                                    {{ author.label }}
                                    {% if not loop.last %}
                                        ,
                                    {% endif %}
                                {% endfor %} | {{ report.dateCreated | date('Y') }}<br/>
                            </div>


                            {% if report.keywords  is not empty %}
                            <label>Mots-clés</label>
                            {% endif %}
                            <div>
                                {% for report in report.keywords %}
                                    <button class="btn btn-white btn-xs" type="button"><i class="fa fa-tag"></i> {{ report.name }}</button>
                                {% endfor %}
                            </div>

                            <div class="hr-line-dashed"></div>
                            {% if report.abstract  is not empty %}
                                <h1>Résumé</h1>
                                {{ report.abstract | raw }}
                                <div class="hr-line-dashed"></div>
                            {% endif %}

                            <div class="row" style="padding: none;margin: none;" >
                                <div class="col-md-4">
                                    <img class="static-map" id='static-map'>
                                </div>
                                <div class="col-md-4">
                                    <img class="static-map" id='static-map-2'>
                                </div>
                                <div class="col-md-4">
                                    <img class="static-map"  id='static-map-3'>
                                </div>
                            </div>

                            <div class="hr-line-dashed"></div>
                                    {{ report.articleBody | raw }}
                            <hr>
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Tags:</h5>
                                    <button class="btn btn-primary btn-xs" type="button">Test</button>
                                    <button class="btn btn-white btn-xs" type="button">Test</button>
                                </div>
                                <div class="col-md-6">
                                    <div class="small text-right">
                                        <h5>Stats:</h5>
                                        <div> <i class="fa fa-comments-o"> </i> 56 comments
                                        </div>
                                        <i class="fa fa-eye"> </i> 144 views
                                    </div>
                                </div> {# end-col-md-6 #}
                            </div> {# end-row #}
                </div> {# end-ibox-content #}
            </div> {# end-ibox #}
        </div> {# end-col-lg-10 col-lg-offset-1 #}
    </div> {# end-row #}
{% endblock %}

{% block footerclass %}
    {{ parent() }}
{% endblock %}
{# Options du footerclass : "footer" "footer fixed" #}

{% block plugins %}
    {{ parent() }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
{% endblock %}

{% block extrascripts %}
    <script>
        L.mapbox.accessToken = 'pk.eyJ1IjoiaHVnb2xlaG91eCIsImEiOiItOHl6Sm5jIn0.12l_k0K_Z28UE-Jc0kDgpw';
        longitude = {{ report.latitude }};
        latitude = {{ report.longitude }};
        var data = {
        "type": "FeatureCollection",
        "features": [
                        {
                        "type": "Feature",
                        "properties": {},
                        "geometry": {
                            "type": "Point",
                            "coordinates": [
                            latitude,
                            longitude
                            ]
                            }
                         }
                    ]
                };

        // The size of the desired map.
        var size = [600, 600];


        document.getElementById('static-map').src =
        'https://api.tiles.mapbox.com/v4/hugolehoux.m2a2l7dj/' +
        'pin-l+C5E96F(' + latitude + ',' + longitude + ')' + '/' +
        latitude + ',' + longitude + ',' +
        3 + '/' +
        size.join('x') + '.png' +
        '?access_token=' + L.mapbox.accessToken;

        document.getElementById('static-map-2').src =
                'https://api.tiles.mapbox.com/v4/hugolehoux.mi8n7fe4/' +
                'pin-l(' + latitude + ',' + longitude + ')' + '/' +
                latitude + ',' + longitude + ',' +
                5 + '/' +
                size.join('x') + '.png' +
                '?access_token=' + L.mapbox.accessToken;

        document.getElementById('static-map-3').src =
                'https://api.tiles.mapbox.com/v4/examples.map-igb471ik/' +
                'pin-l+C5E96F(' + latitude + ',' + longitude + ')' + '/' +
                latitude + ',' + longitude + ',' +
                7 + '/' +
                size.join('x') + '.png' +
                '?access_token=' + L.mapbox.accessToken;
    </script>
{% endblock %}